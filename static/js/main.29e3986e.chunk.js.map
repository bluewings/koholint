{"version":3,"sources":["Map/Map.module.scss","Main/Main.module.scss","Map/useLeaflet.ts","Map/useContainerRect.ts","Map/Map.tsx","Map/index.ts","Main/Main.tsx","Main/index.ts","App.tsx","serviceWorker.js","index.tsx"],"names":["module","exports","LEAFLET_URI","loadScript","src","Promise","resolve","reject","head","document","getElementsByTagName","script","createElement","type","onload","onerror","Error","split","pop","appendChild","useLeaflet","L","useState","ready","setReady","useEffect","a","window","err","useMemo","undefined","all","useContainerRect","elemRef","deps","dependencies","toString","mapFn","e","hasChanged","before","after","JSON","stringify","items","filter","indexOf","watch","length","reduce","prev","key","top","left","right","bottom","width","height","rect_","setRect","rect","useRef","current","requestId","checkRect","cancelAnimationFrame","parentNode","elemRect","getBoundingClientRect","tmpRect","next","requestAnimationFrame","locs","monsters","phones","homes","moneyBag","MapInner","deepzoom","root","container","defaultZoom","zoom","getSizeInfo","maxZoom","fileURI","minZoom","tileImg","tileSizes","innerHTML","map","Math","max","zoomControl","attributionControl","zoomSnap","southWest","unproject","getMaxZoom","northEast","bounds","LatLngBounds","setMaxBounds","setView","lng","lat","myIcon","divIcon","className","styles","marker","iconSize","html","mons","icon","layerGroup","addTo","phn2","Control","Zoom","position","phn3","phn4","MapTileLayer","TileLayer","extend","createTile","coords","done","z","x","y","maxX","maxY","tileSrc","replace","tile","style","on","push","latlng","console","log","tms","continuousWorld","noWrap","defaultRadius","remove","containerStyle","ref","deepzoomSize","containerSize","deepzoomW","deepzoomH","containerW","containerH","r1","r2","scale","ceil","pow","Map","props","Main","App","Boolean","location","hostname","match","ReactDOM","render","getElementById","navigator","serviceWorker","then","registration","unregister"],"mappings":"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","file":"static/js/main.29e3986e.chunk.js","sourcesContent":["// extracted by mini-css-extract-plugin\nmodule.exports = {\"root\":\"Map_root__1b4eQ\",\"marker\":\"Map_marker__3Galn\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"logo\":\"Main_logo__1GFdy\"};","import { useEffect, useState, useMemo } from 'react';\nimport { Map, MapOptions, LatLngExpression } from 'leaflet';\nimport 'leaflet/dist/leaflet.css';\n\ninterface InitializeMap {\n  (element: string | HTMLElement, options?: MapOptions): Map;\n}\n\ninterface LatLngBounds {\n  new (southWest: LatLngExpression, northEast: LatLngExpression): any;\n}\n\nexport type Leaflet = {\n  map: InitializeMap;\n  LatLngBounds: LatLngBounds;\n  Control: any;\n  TileLayer: any;\n};\n\nconst LEAFLET_URI =\n  'https://cdnjs.cloudflare.com/ajax/libs/leaflet/1.5.1/leaflet.js';\n\nconst loadScript = (src: string) => {\n  return new Promise((resolve, reject) => {\n    const head = document.head || document.getElementsByTagName('head')[0];\n    const script = document.createElement('script');\n    script.type = 'text/javascript';\n    script.src = src;\n    script.onload = resolve;\n    script.onerror = () =>\n      reject(new Error(`failed to load: ${src.split('/').pop()}`));\n    head.appendChild(script);\n  });\n};\n\nfunction useLeaflet(): Leaflet | undefined {\n  const [ready, setReady] = useState(false);\n\n  useEffect(() => {\n    (async () => {\n      // @ts-ignore\n      if (!window.L) {\n        await loadScript(LEAFLET_URI);\n      }\n      setReady(true);\n    })();\n  }, []);\n\n  let L: any;\n  try {\n    // @ts-ignore\n    L = window.L;\n  } catch (err) {\n    /* ignore */\n  }\n\n  return useMemo(() => (ready && L ? L : undefined), [ready, L]);\n}\n\nexport default useLeaflet;\n","import { useEffect, useMemo, useState, useRef, MutableRefObject } from 'react';\n\ntype ContainerRect = {\n  top: null | number;\n  left: null | number;\n  right: null | number;\n  bottom: null | number;\n  width: null | number;\n  height: null | number;\n};\n\n// type HTMLElementRef = MutableRefObject<HTMLElement | null>;\n\nconst all = ['top', 'left', 'right', 'bottom', 'width', 'height'];\n\nconst useContainerRect = (\n  elemRef: any,\n  deps?: string[] | Function,\n): ContainerRect => {\n  const dependencies = (deps || '').toString();\n  const mapFn = useMemo(\n    () => (typeof deps === 'function' ? deps : (e: any) => e),\n    [dependencies],\n  );\n\n  const hasChanged = useMemo(() => {\n    if (typeof deps === 'function') {\n      // return deps;\n\n      // const tmp = watch(tmpRect);\n\n      return (before: any, after: any) => {\n        return JSON.stringify(before) !== JSON.stringify(deps(after));\n      };\n\n      // return (rectA: any, rectB: any) => {\n      // };\n      // return hasChanged =\n      //   JSON.stringify(rect.current) !== JSON.stringify(watch(tmpRect));\n    }\n    const items = (deps || []).filter((e: string) => all.indexOf(e) !== -1);\n    const watch = items.length > 0 ? items : all;\n\n    return (before: any, after: any) => {\n      return watch.reduce(\n        (prev: boolean, key: string) => prev || before[key] !== after[key],\n        false,\n      );\n    };\n  }, [(deps || []).toString()]);\n\n  const [rect_, setRect] = useState<any>(() =>\n    mapFn({\n      top: null,\n      left: null,\n      right: null,\n      bottom: null,\n      width: null,\n      height: null,\n    }),\n  );\n\n  const rect = useRef<any>();\n  rect.current = rect_;\n\n  const requestId = useRef<number>();\n\n  useEffect(() => {\n    const checkRect = () => {\n      requestId.current && cancelAnimationFrame(requestId.current);\n      if (elemRef.current && elemRef.current.parentNode) {\n        const elemRect = elemRef.current.parentNode.getBoundingClientRect();\n        // let hasChanged: boolean;\n        // let next;\n        const tmpRect: any = {\n          top: elemRect.top,\n          left: elemRect.left,\n          right: elemRect.right,\n          bottom: elemRect.bottom,\n          width: elemRect.width,\n          height: elemRect.height,\n        };\n\n        // if (typeof hasChanged === 'function') {\n        //   // next = watch()\n        //   const tmp = hasChanged(tmpRect);\n        //   hasChanged =\n        //     JSON.stringify(rect.current) !==\n        //     JSON.stringify(hasChanged(tmpRect));\n        //   // console.log(\n        //   //   'case 1',\n        //   //   hasChanged,\n        //   //   JSON.stringify(rect.current),\n        //   //   JSON.stringify(watch(tmpRect)),\n        //   // );\n        //   rect.current = tmp;\n        // } else {\n        //   hasChanged = hasChanged.reduce(\n        //     (prev: boolean, key: string) =>\n        //       prev || rect.current[key] !== tmpRect[key],\n        //     false,\n        //   );\n        // }\n\n        if (hasChanged(rect.current, tmpRect)) {\n          const next = mapFn({\n            top: tmpRect.top,\n            left: tmpRect.left,\n            right: tmpRect.right,\n            bottom: tmpRect.bottom,\n            width: tmpRect.width,\n            height: tmpRect.height,\n          });\n          rect.current = next;\n          // console.log('>>>>> ', next);\n          setRect(next);\n          return;\n        }\n      }\n      requestId.current = requestAnimationFrame(checkRect);\n    };\n    checkRect();\n    return () => {\n      requestId.current && cancelAnimationFrame(requestId.current);\n    };\n  }, [elemRef.current || null, hasChanged, rect_]);\n\n  return rect_;\n};\n\nexport default useContainerRect;\n","import * as React from 'react';\nimport {\n  useCallback,\n  useEffect,\n  useMemo,\n  useRef,\n  useState,\n  SyntheticEvent,\n} from 'react';\nimport useLeaflet, { Leaflet } from './useLeaflet';\nimport useContainerRect from './useContainerRect';\nimport styles from './Map.module.scss';\nimport deepzoom from './map.json';\nimport icon1 from './images/ico-4.svg';\n\ntype IProps = {\n  L: Leaflet;\n  deepzoom: any;\n};\n\nvar locs:any = [];\n\nconst monsters = [{\"lat\":85.04523142802671,\"lng\":-179.93785858154297},{\"lat\":85.01384928049275,\"lng\":-179.76207733154297},{\"lat\":85.01845846442565,\"lng\":-179.64847773313528},{\"lat\":85.01268538977108,\"lng\":-179.4273376464844},{\"lat\":85.02533002426063,\"lng\":-179.26815524697304},{\"lat\":85.04000983840967,\"lng\":-179.31987762451175},{\"lat\":85.04600233423471,\"lng\":-179.14306640625003},{\"lat\":85.04009888874582,\"lng\":-179.72190856933597},{\"lat\":85.0451721225929,\"lng\":-179.93785858154297}]\n\nconst phones = [{\"lat\":85.04457902930932,\"lng\":-179.87571716308594},{\"lat\":85.03730788685448,\"lng\":-179.879150390625},{\"lat\":85.01813319628694,\"lng\":-179.82505157589915},{\"lat\":85.02045817079237,\"lng\":-179.7237713634968},{\"lat\":85.01044637665916,\"lng\":-179.49600219726562},{\"lat\":85.02422277951345,\"lng\":-179.48501586914062},{\"lat\":85.01275884040457,\"lng\":-179.30322244763377},{\"lat\":85.03423451262329,\"lng\":-179.3198870122433}]\n\n\nconst homes = [{\"lat\":85.01888967699189,\"lng\":-179.94987487792972},{\"lat\":85.025503067195,\"lng\":-179.87537384033206},{\"lat\":85.01808474780562,\"lng\":-179.76860046386722},{\"lat\":85.03736728618173,\"lng\":-179.5475006103516},{\"lat\":85.02514441508455,\"lng\":-179.37150210142136},{\"lat\":85.0374563838429,\"lng\":-179.10427093505862}]\n\n\nconst moneyBag = [{\"lat\":85.0225520261357,\"lng\":-179.7738001014657},{\"lat\":85.0308479925631,\"lng\":-179.66085539669692},{\"lat\":85.03512525126912,\"lng\":-179.6382043982131}]\n\nfunction MapInner({ L, deepzoom }: IProps) {\n  const root = useRef<any>();\n  const container = useRef<any>();\n\n  // get container size info\n  const rect: any = useContainerRect(container, ['width', 'height']);\n  const [width, height] = useMemo(\n    () =>\n      rect && rect.width && rect.height ? [rect.width, rect.height] : [0, 0],\n    [rect],\n  );\n\n  const defaultZoom: any = useMemo(() => {\n    if (deepzoom && width && height) {\n      const { zoom } = getSizeInfo(deepzoom, { width, height });\n      return deepzoom.maxZoom - zoom;\n    }\n    return undefined;\n  }, [width, height, deepzoom]);\n\n  // console.log({ defaultZoom });\n\n  const fileURI = 'https://bluewings.github.io/koholint/assets';\n\n  useEffect(() => {\n    // initialize leaflet viewer\n    if (defaultZoom && container.current) {\n      const {\n        width,\n        height,\n        minZoom,\n        maxZoom,\n        tileImg,\n        tileSizes,\n      }: any = deepzoom;\n\n      container.current.innerHTML = '';\n      const map = L.map(container.current, {\n        maxZoom: Math.max(defaultZoom, maxZoom),\n        minZoom: Math.max(defaultZoom, minZoom),\n        zoomControl: false,\n        attributionControl: false,\n        zoomSnap: 0,\n      });\n\n      // define the area of the map to display based on the original width\n      const southWest = map.unproject([0, height], map.getMaxZoom());\n      const northEast = map.unproject([width, 0], map.getMaxZoom());\n      const bounds = new L.LatLngBounds(southWest, northEast);\n\n      map.setMaxBounds(bounds);\n      map.setView([northEast.lng / 2, southWest.lat / 2], defaultZoom);\n      const center = [\n        (northEast.lng + southWest.lng) / 2,\n        (northEast.lat + southWest.lat) / 2,\n      ];\n\n      map.setView(\n        [\n          (northEast.lng + southWest.lng) / 2,\n          (northEast.lat + southWest.lat) / 2,\n        ],\n        defaultZoom,\n      );\n      // console.log({\n      //   bounds,\n      //   center,\n\n      //   center2: [northEast.lng / 2, southWest.lat / 2],\n      // });\n\n      // map.addEventListener('movestart', moveStart);\n      // map.addEventListener('moveend', moveEnd);\n\n      //   var myIcon = L.icon({\n      //     iconUrl: 'my-icon.png',\n      //     iconSize: [38, 95],\n      //     iconAnchor: [22, 94],\n      //     popupAnchor: [-3, -76],\n      //     shadowUrl: 'my-icon-shadow.png',\n      //     shadowSize: [68, 95],\n      //     shadowAnchor: [22, 94]\n      // });\n      // @ts-ignore\n      // L.marker([50.505, 30.57], {icon: myIcon}).addTo(map);\n\n      // @ts-ignore\n      var myIcon = L.divIcon({\n        className: styles.marker,\n        iconSize: [36, 36],\n        html: '<span class=\"icon-monster\" />',\n      });\n      const mons = monsters.map(({lat,lng}) => {\n        // @ts-ignore\n        return L.marker([lat,lng], { icon: myIcon })\n      })\n      // @ts-ignore\n      L.layerGroup(mons).addTo(map);\n\n      // @ts-ignore\n      var myIcon = L.divIcon({\n        className: styles.marker,\n        iconSize: [36, 36],\n        html: '<span class=\"icon-telephone\" />',\n      });\n      const phn2 = phones.map(({lat,lng}) => {\n        // @ts-ignore\n        return L.marker([lat,lng], { icon: myIcon })\n      })\n      // @ts-ignore\n      L.layerGroup(phn2).addTo(map);\n      // add zoom control\n      new L.Control.Zoom({ position: 'bottomright' }).addTo(map);\n\n      // @ts-ignore\n      var myIcon = L.divIcon({\n        className: styles.marker,\n        iconSize: [36, 36],\n        html: '<span class=\"icon-house\" />',\n      });\n      const phn3 = homes.map(({lat,lng}) => {\n        // @ts-ignore\n        return L.marker([lat,lng], { icon: myIcon })\n      })\n      // @ts-ignore\n      L.layerGroup(phn3).addTo(map);\n      // add zoom control\n      new L.Control.Zoom({ position: 'bottomright' }).addTo(map);\n\n      // @ts-ignore\n      var myIcon = L.divIcon({\n        className: styles.marker,\n        iconSize: [36, 36],\n        html: '<span class=\"icon-money-bag\" />',\n      });\n      const phn4 = moneyBag.map(({lat,lng}) => {\n        // @ts-ignore\n        return L.marker([lat,lng], { icon: myIcon })\n      })\n      // @ts-ignore\n      L.layerGroup(phn4).addTo(map);\n      // add zoom control\n      new L.Control.Zoom({ position: 'bottomright' }).addTo(map);\n\n      // apply a custom tile layer.\n      const MapTileLayer = L.TileLayer.extend({\n        createTile: function(coords: any, done: Function) {\n          const { z, x, y } = coords;\n          // do not provide an image beyond the supported range\n          if (!tileSizes[z]) {\n            return document.createElement('div');\n          }\n          const [maxX, maxY] = tileSizes[z];\n          // do not provide an image if there are no tiles in that area\n          if (x < 0 || y < 0 || maxX < x || maxY < y) {\n            return document.createElement('div');\n          }\n\n          let tileSrc = `${fileURI}/${tileImg}`\n            .replace(/{z}/, z)\n            .replace(/{x}/, x)\n            .replace(/{y}/, y);\n\n          // console.log({ maxX, maxY });\n\n          if (true || x === 0 || y === 0 || x === maxX || y === maxY) {\n            // console.log({ x, y });\n            tileSrc = tileSrc.replace(/\\.jpeg$/, '.png');\n          }\n          var tile = document.createElement('img');\n          tile.onload = () => {\n            tile.style.width = 'auto';\n            tile.style.height = 'auto';\n            done(null, tile);\n          };\n          tile.src = tileSrc;\n          return tile;\n        },\n      });\n\n      map.on('click', function(e) {\n        // @ts-ignore\n        // console.log(e.latlng);\n\n        locs.push(e.latlng)\n        // @ts-ignore\n        console.log(JSON.stringify(locs))\n    } );\n\n      new MapTileLayer({\n        minZoom,\n        maxZoom,\n        tms: false,\n        continuousWorld: 'false',\n        noWrap: false,\n        defaultRadius: 1,\n      }).addTo(map);\n\n      return () => {\n        try {\n          map.remove();\n        } catch (e) {\n          /* ignore */\n        }\n      };\n    }\n    return undefined;\n  }, [fileURI, deepzoom, defaultZoom, width, height]);\n\n  const containerStyle = useMemo(\n    () => (width && height ? { width: width, height: height } : {}),\n    [width, height],\n  );\n  return (\n    <div>\n      <div className={styles.root} ref={root}>\n        <div ref={container} style={containerStyle}></div>\n      </div>\n    </div>\n  );\n}\n\nfunction Map(props: any) {\n  const L = useLeaflet();\n  return <div>{L ? <MapInner L={L} deepzoom={deepzoom} /> : null}</div>;\n}\n\nconst getSizeInfo = (\n  deepzoomSize: any,\n  containerSize: any,\n  zoomSnap = false,\n) => {\n  const { width: deepzoomW, height: deepzoomH } = deepzoomSize;\n  const { width: containerW, height: containerH } = containerSize;\n  const r1 = containerW / containerH;\n  const r2 = deepzoomW / deepzoomH;\n  let scale = r1 > r2 ? deepzoomH / containerH : deepzoomW / containerW;\n  let zoom = Math.log(scale) / Math.log(2);\n  if (zoomSnap) {\n    zoom = Math.ceil(zoom);\n    scale = Math.pow(2, zoom);\n  }\n  const width = Math.ceil(deepzoomW / scale);\n  const height = Math.ceil(deepzoomH / scale);\n  return {\n    scale,\n    zoom,\n    style: {\n      width,\n      height,\n      top: (containerH - height) / 2,\n      left: (containerW - width) / 2,\n    },\n  };\n};\n\nexport default Map;\n","import Map from './Map';\n\nexport default Map;\n","import * as React from 'react';\nimport Map from '../Map';\nimport logoKo from './images/logo-en.png';\nimport Header from './Header';\nimport Icon from '../Icon';\nimport styles from './Main.module.scss';\n\nfunction Main(props: any) {\n  return (\n    <div className={styles.root}>\n      {/* <Header />\n      <Icon /> */}\n\n      {/* <img className={styles.logo} src={logoKo}/> */}\n      {/* <h1>Main</h1> */}\n      <Map />\n    </div>\n  );\n}\n\nexport default Main;\n","import Main from './Main';\n\nexport default Main;\n","import React from 'react';\nimport Main from './Main';\n// import Map from './Map';\nimport GithubCorner from 'react-github-corner';\n\nfunction App() {\n  return (\n    <div>\n      <Main />\n      {/* <GithubCorner href=\"https://github.com/bluewings/koholint\" /> */}\n    </div>\n  );\n}\n\nexport default App;\n","// This optional code is used to register a service worker.\n// register() is not called by default.\n\n// This lets the app load faster on subsequent visits in production, and gives\n// it offline capabilities. However, it also means that developers (and users)\n// will only see deployed updates on subsequent visits to a page, after all the\n// existing tabs open on the page have been closed, since previously cached\n// resources are updated in the background.\n\n// To learn more about the benefits of this model and instructions on how to\n// opt-in, read https://bit.ly/CRA-PWA\n\nconst isLocalhost = Boolean(\n  window.location.hostname === 'localhost' ||\n    // [::1] is the IPv6 localhost address.\n    window.location.hostname === '[::1]' ||\n    // 127.0.0.1/8 is considered localhost for IPv4.\n    window.location.hostname.match(\n      /^127(?:\\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/,\n    ),\n);\n\nexport function register(config) {\n  if (process.env.NODE_ENV === 'production' && 'serviceWorker' in navigator) {\n    // The URL constructor is available in all browsers that support SW.\n    const publicUrl = new URL(process.env.PUBLIC_URL, window.location.href);\n    if (publicUrl.origin !== window.location.origin) {\n      // Our service worker won't work if PUBLIC_URL is on a different origin\n      // from what our page is served on. This might happen if a CDN is used to\n      // serve assets; see https://github.com/facebook/create-react-app/issues/2374\n      return;\n    }\n\n    window.addEventListener('load', () => {\n      const swUrl = `${process.env.PUBLIC_URL}/service-worker.js`;\n\n      if (isLocalhost) {\n        // This is running on localhost. Let's check if a service worker still exists or not.\n        checkValidServiceWorker(swUrl, config);\n\n        // Add some additional logging to localhost, pointing developers to the\n        // service worker/PWA documentation.\n        navigator.serviceWorker.ready.then(() => {\n          console.log(\n            'This web app is being served cache-first by a service ' +\n              'worker. To learn more, visit https://bit.ly/CRA-PWA',\n          );\n        });\n      } else {\n        // Is not localhost. Just register service worker\n        registerValidSW(swUrl, config);\n      }\n    });\n  }\n}\n\nfunction registerValidSW(swUrl, config) {\n  navigator.serviceWorker\n    .register(swUrl)\n    .then((registration) => {\n      registration.onupdatefound = () => {\n        const installingWorker = registration.installing;\n        if (installingWorker == null) {\n          return;\n        }\n        installingWorker.onstatechange = () => {\n          if (installingWorker.state === 'installed') {\n            if (navigator.serviceWorker.controller) {\n              // At this point, the updated precached content has been fetched,\n              // but the previous service worker will still serve the older\n              // content until all client tabs are closed.\n              console.log(\n                'New content is available and will be used when all ' +\n                  'tabs for this page are closed. See https://bit.ly/CRA-PWA.',\n              );\n\n              // Execute callback\n              if (config && config.onUpdate) {\n                config.onUpdate(registration);\n              }\n            } else {\n              // At this point, everything has been precached.\n              // It's the perfect time to display a\n              // \"Content is cached for offline use.\" message.\n              console.log('Content is cached for offline use.');\n\n              // Execute callback\n              if (config && config.onSuccess) {\n                config.onSuccess(registration);\n              }\n            }\n          }\n        };\n      };\n    })\n    .catch((error) => {\n      console.error('Error during service worker registration:', error);\n    });\n}\n\nfunction checkValidServiceWorker(swUrl, config) {\n  // Check if the service worker can be found. If it can't reload the page.\n  fetch(swUrl)\n    .then((response) => {\n      // Ensure service worker exists, and that we really are getting a JS file.\n      const contentType = response.headers.get('content-type');\n      if (\n        response.status === 404 ||\n        (contentType != null && contentType.indexOf('javascript') === -1)\n      ) {\n        // No service worker found. Probably a different app. Reload the page.\n        navigator.serviceWorker.ready.then((registration) => {\n          registration.unregister().then(() => {\n            window.location.reload();\n          });\n        });\n      } else {\n        // Service worker found. Proceed as normal.\n        registerValidSW(swUrl, config);\n      }\n    })\n    .catch(() => {\n      console.log(\n        'No internet connection found. App is running in offline mode.',\n      );\n    });\n}\n\nexport function unregister() {\n  if ('serviceWorker' in navigator) {\n    navigator.serviceWorker.ready.then((registration) => {\n      registration.unregister();\n    });\n  }\n}\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport 'bootstrap/dist/css/bootstrap.min.css';\nimport './index.css';\nimport './styles/style.css';\nimport App from './App';\nimport * as serviceWorker from './serviceWorker';\n\nReactDOM.render(<App />, document.getElementById('root'));\n\n// If you want your app to work offline and load faster, you can change\n// unregister() to register() below. Note this comes with some pitfalls.\n// Learn more about service workers: https://bit.ly/CRA-PWA\nserviceWorker.unregister();\n"],"sourceRoot":""}