(window.webpackJsonpkoholint=window.webpackJsonpkoholint||[]).push([[0],{15:function(t,e,n){},19:function(t,e,n){"use strict";n.r(e);var o=n(0),r=n.n(o),i=n(4),a=n.n(i),c=(n(14),n(15),n(1)),u=n(2),l=n.n(u),h=n(5),m=(n(17),"https://cdnjs.cloudflare.com/ajax/libs/leaflet/1.5.1/leaflet.js"),f=function(t){return new Promise((function(e,n){var o=document.head||document.getElementsByTagName("head")[0],r=document.createElement("script");r.type="text/javascript",r.src=t,r.onload=e,r.onerror=function(){return n(new Error("failed to load: ".concat(t.split("/").pop())))},o.appendChild(r)}))};var s=function(){var t,e=Object(o.useState)(!1),n=Object(c.a)(e,2),r=n[0],i=n[1];Object(o.useEffect)((function(){Object(h.a)(l.a.mark((function t(){return l.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(window.L){t.next=3;break}return t.next=3,f(m);case 3:i(!0);case 4:case"end":return t.stop()}}),t)})))()}),[]);try{t=window.L}catch(a){}return Object(o.useMemo)((function(){return r&&t?t:void 0}),[r,t])},d=["top","left","right","bottom","width","height"],g=function(t,e){var n=(e||"").toString(),r=Object(o.useMemo)((function(){return"function"===typeof e?e:function(t){return t}}),[n]),i=Object(o.useMemo)((function(){if("function"===typeof e)return function(t,n){return JSON.stringify(t)!==JSON.stringify(e(n))};var t=(e||[]).filter((function(t){return-1!==d.indexOf(t)})),n=t.length>0?t:d;return function(t,e){return n.reduce((function(n,o){return n||t[o]!==e[o]}),!1)}}),[(e||[]).toString()]),a=Object(o.useState)((function(){return r({top:null,left:null,right:null,bottom:null,width:null,height:null})})),u=Object(c.a)(a,2),l=u[0],h=u[1],m=Object(o.useRef)();m.current=l;var f=Object(o.useRef)();return Object(o.useEffect)((function(){return function e(){if(f.current&&cancelAnimationFrame(f.current),t.current&&t.current.parentNode){var n=t.current.parentNode.getBoundingClientRect(),o={top:n.top,left:n.left,right:n.right,bottom:n.bottom,width:n.width,height:n.height};if(i(m.current,o)){var a=r({top:o.top,left:o.left,right:o.right,bottom:o.bottom,width:o.width,height:o.height});return m.current=a,void h(a)}}f.current=requestAnimationFrame(e)}(),function(){f.current&&cancelAnimationFrame(f.current)}}),[t.current||null,i,l]),l},p=n(6),w=n.n(p),v=n(7);function b(t){var e=t.L,n=t.deepzoom,r=Object(o.useRef)(),i=Object(o.useRef)(),a=g(r,["width","height"]),u=Object(o.useMemo)((function(){return a&&a.width&&a.height?[a.width,a.height]:[0,0]}),[a]),l=Object(c.a)(u,2),h=l[0],m=l[1],f=Object(o.useMemo)((function(){if(n&&h&&m){var t=j(n,{width:h,height:m}).zoom;return n.maxZoom-t}}),[h,m,n]);console.log({defaultZoom:f});var s="https://bluewings.github.io/koholint/assets";return Object(o.useEffect)((function(){if(f&&i.current){var t=n.width,o=n.height,r=n.minZoom,a=n.maxZoom,u=n.tileImg,l=n.tileSizes;i.current.innerHTML="";var h=e.map(i.current,{maxZoom:Math.max(f,a),minZoom:Math.max(f,r),zoomControl:!1,attributionControl:!1,zoomSnap:0}),m=h.unproject([0,o],h.getMaxZoom()),d=h.unproject([t,0],h.getMaxZoom()),g=new e.LatLngBounds(m,d);return h.setMaxBounds(g),h.setView([d.lng/2,m.lat/2],f),new e.Control.Zoom({position:"bottomright"}).addTo(h),new(e.TileLayer.extend({createTile:function(t,e){var n=t.z,o=t.x,r=t.y;if(!l[n])return document.createElement("div");var i=Object(c.a)(l[n],2),a=i[0],h=i[1];if(o<0||r<0||a<o||h<r)return document.createElement("div");var m="".concat(s,"/").concat(u).replace(/{z}/,n).replace(/{x}/,o).replace(/{y}/,r);0!==o&&0!==r&&o!==a-1&&r!==h-1||(console.log({x:o,y:r}),m=m.replace(/\.jpeg$/,".png"));var f=document.createElement("img");return f.onload=function(){f.style.width="auto",f.style.height="auto",e(null,f)},f.src=m,f}}))({minZoom:r,maxZoom:a,tms:!1,continuousWorld:"false",noWrap:!1,defaultRadius:1}).addTo(h),function(){try{h.remove()}catch(t){}}}}),[s,n,f,h,m]),o.createElement("div",null,o.createElement("div",{ref:r},o.createElement("div",{ref:i,style:{width:400,height:400}})))}var j=function(t,e){var n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],o=t.width,r=t.height,i=e.width,a=e.height,c=i/a,u=o/r,l=c>u?r/a:o/i,h=Math.log(l)/Math.log(2);n&&(h=Math.ceil(h),l=Math.pow(2,h));var m=Math.ceil(o/l),f=Math.ceil(r/l);return{scale:l,zoom:h,style:{width:m,height:f,top:(a-f)/2,left:(i-m)/2}}},x=function(t){var e=s();return o.createElement("div",{className:w.a.root},e?o.createElement(b,{L:e,deepzoom:v}):null)},O=n(8),y=n.n(O);var E=function(){return r.a.createElement("div",null,r.a.createElement(x,null),r.a.createElement(y.a,{href:"https://github.com/bluewings/koholint"}))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));a.a.render(r.a.createElement(E,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(t){t.unregister()}))},6:function(t,e,n){t.exports={root:"Map_root__1b4eQ"}},7:function(t){t.exports=JSON.parse('{"format":"dz","width":2805,"height":1600,"channels":4,"premultiplied":false,"id":"koholint","tileImg":"koholint/tiles/{z}/{x}_{y}.jpeg","minZoom":8,"maxZoom":12,"tileSizes":{"8":[0,0],"9":[1,0],"10":[2,1],"11":[5,3],"12":[10,6]}}')},9:function(t,e,n){t.exports=n(19)}},[[9,1,2]]]);
//# sourceMappingURL=main.355c3b23.chunk.js.map